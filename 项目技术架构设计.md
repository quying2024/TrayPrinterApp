# 打印店自动打印系统 - 项目结构说明

## 解决方案结构
```
TrayPrinterApp/
├── src/
│   ├── TrayApp.Core/           # 核心接口和模型
│   ├── TrayApp.FolderMonitor/  # 文件夹监视模块
│   ├── TrayApp.Printing/       # 打印管理模块
│   ├── TrayApp.FileOperations/ # 文件操作模块
│   ├── TrayApp.Configuration/  # 配置管理模块
│   ├── TrayApp.TaskHistory/    # 任务历史记录模块
│   ├── TrayApp.UI/             # 用户界面组件
│   └── TrayApp/                # 主应用程序
├── config/                     # 配置文件
└── tests/                      # 单元测试项目
```

## 核心项目说明

### 1. TrayApp.Core
定义系统核心接口和数据模型，确保各模块解耦：
- IConfigurationService: 配置服务接口
- IFolderMonitor: 文件夹监视接口  
- IPrintManager: 打印管理接口
- IFileOperator: 文件操作接口
- ITaskHistoryManager: 任务历史记录接口
- ILogger: 日志接口

### 2. TrayApp.FolderMonitor
实现文件夹监视功能，使用FileSystemWatcher监控文件变化，并支持批量收集：
- FileSystemWatcherMonitor: 实现IFolderMonitor接口
- 支持配置监视路径和批量收集时间窗口

### 3. TrayApp.Printing
处理打印逻辑，支持调用外部程序打印和页码统计：
- ExternalPrintManager: 实现IPrintManager接口
- IPageCounter: 页码统计接口
- 支持按文件类型调用不同打印程序

### 4. TrayApp.FileOperations
处理文件移动和目录创建：
- TimestampFileOperator: 实现IFileOperator接口
- 支持创建时间戳目录和移动文件

### 5. TrayApp.Configuration
管理应用配置：
- JsonConfigurationService: 实现IConfigurationService接口
- 支持读取/写入JSON配置文件
- 配置模型包括打印机过滤、文件类型映射等

### 6. TrayApp.TaskHistory
记录打印任务历史：
- TaskHistoryManager: 实现ITaskHistoryManager接口
- 支持记录和查询打印任务信息（页码、时间、打印机等）

### 7. TrayApp.UI
实现用户界面组件：
- TrayIconManager: 系统托盘图标管理
- PrinterSelectionForm: 打印机选择对话框
- TaskHistoryWindow: 任务历史查看窗口

### 8. TrayApp
主应用程序，协调各模块工作：
- AppCore: 应用核心协调类
- Program: 应用入口点